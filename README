$Id$

1. INTRODUCTION::

     This collection of scripts, known as jhalfs, strives to create
  accurate makefiles from the Linux From Scratch book series XML files.
  This software is an evolution of the original "jhalfs-0.2" code.

     The usage of this script assumes you have read and are familiar with
  the book(s) and, therefore, the configuration variables found in config
  files will have meaning to you. There are a number of command line switches
  which, if used, will override the config file settings.

  NOTES::
  *.  The resulting Makefile takes considerable time to run to completion.
  Lay in a supply of caffeine beverages.

  *.  It is recommended that you temporarily unpack your linux kernel,
  run <make menuconfig>, configure the kernal as per the book and save
  the resulting .config file. This suggestion also applies to the
  configuration of the uClibc package when building a HLFS system using
  uClibc rather than glibc.

2. INSTALLATION::
     No installation is required. System-wide installation is not allowed
  for now.

3. CONFIGURATION FILES::
     Each book in the LFS series has its own set of configurable parameters
  as well as the common parameters file.

4. RUNNING::
     The script master.sh cannot be invoked directly but only via the
  supplied symlinks. After editing the config file for the project you wish
  to build, run the script.

     The term <symlink> refers to the 1 of 4 package symlinks, lfs,hlfs,clfs,blfs.
     Replace <symlink> with your choice of packages; i.e.: ./lfs

     ./<symlink>
     Create a makefile based on the settings found in the config files.
     You must enter the build partition/jhalfs directory and manually run <make>

     ./<symlink> -G
     Download the packages and patches necessary to build <symlink>

     ./<symlink> -G -M
     Download the packages, create and automatically run the Makefile

     ./<symlink> --help  will give you a context sensitive list of command
                         line switches.

5. LAYOUT::

        blfs --+  /BLFS config ---+             /common/config
               |       master.sh -+                    /common_functions
               |       xxxx.xsl  -+                    /makefile_functions
               |                                       /func_check_versions.sh
        clfs --+  /CLFS config ---+                    /func_validate_configs.sh
               |       master.sh -+
               |       xxxx.xsl  -+
               |
               +--------------------- master.sh --------------->>>
               +--README
               |
        hlfs --+  /HLFS config ---+
               |       master.sh -+
               |       xxxx.xsl  -+
               |
        lfs  --+  /LFS  config ---+
                       master.sh -+
                       xxxx.xsl  -+


6. FAQ::
    Q. "It doesn't work"
    A. Yes it does..
    
    Q. "How do I specify the build location"
    A. The original LFS document worked against the well know location /mnt/lfs.
       This script automates the build of all of the LFS series of books and uses
       a generic location $BUILDDIR with a default value a /mnt/build_dir.
       You may change this value to suit your needs.
 
       The layout below $BUILDDIR is as follows.
       $BUILDDIR/
            jhalfs      (makefile,cmd scripts,logs..etc)
	    sources     (where packages reside
	    temptools   (temporary bootstrap system
	    cross-tools (CLFS only)
	        ...
	    FHS dir structure
	        ...
    
    Q. "What is the function of the SRC_ARCHIVE variable
    A. When then symlinked master.sh runs it creates a local copy of the
       necessary packages in BUILDDIR/sources by downloading the files. If
       the variable SRC_ARCHIVE is defined the software will first look in
       this location for the file and, if found, will copy it to BUILDDIR/sources.
       If the files are not found in SRC_ARCHIVE _and_ you have write priv to
       the directory any downloaded files will be mirrored there.
       
    Q. "How do I set the SRC_ARCHIVE location"
    A. The best way to set the value of SRC_ARCHIVE is
       export SRC_ARCHIVE=/wherever/you/store/downloaded/packages
                       OR
       you can change the setting in .common/config. 
    
    Q. "Why have 2 copies of the files."
    A. The package files must be visible during the chroot phase and this is a
       simple and reliable method of doing so. This method also handles the CLFS
       build method where the final build may be done on a separate machine.

Authors:
  George Boudreau
  Manuel Canales Esparcia
  Jeremy Huntwork
